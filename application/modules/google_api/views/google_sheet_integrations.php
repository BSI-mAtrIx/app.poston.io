<section class="section">
  <div class="section-header">
    <h1>
    <img class="border p-1 rounded-circle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADcWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS41LWMwMjEgNzkuMTU0OTExLCAyMDEzLzEwLzI5LTExOjQ3OjE2ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjljODA2YTNlLTA0ZTQtY2Y0Yi04NDg5LTg1MGVhYWYwMzYyNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1RTE0MTEzMzFEM0YxMUVCOTIxRUZEMEIyQ0IxMjIwMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1RTE0MTEzMjFEM0YxMUVCOTIxRUZEMEIyQ0IxMjIwMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OWM4MDZhM2UtMDRlNC1jZjRiLTg0ODktODUwZWFhZjAzNjI0IiBzdFJlZjpkb2N1bWVudElEPSJ4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" alt="" />
    Google Sheet Integrations</h1>    
    <div class="section-header-breadcrumb">
      <div class="breadcrumb-item">Google API</div>
      <div class="breadcrumb-item"><a href="/google_api/google_sheet_integrations">Google Sheet</a></div>
    </div>
  </div>
</section>

    
<div class="section-body"> 
    <div class="card" id="nodata">
      <div class="card-body">
        
        <div class="empty-state hide_in_iframe <?php if ( $this->input->get('page_id', TRUE) ) {echo "d-none";} ?>">
          <img class="img-fluid border p-1 mb-5" style="/* max-width: 90%; */" src="https://marketplace.bcheckin.com/cdn/items/google_sheet_integrations/google_sheet_banner_a.png" alt="image">
           <h2 class="mt-0 title">Select your Pages</h2>
            <form action="" id="carform">
                <div class="form-group">
                    <select class="form-control" id="pageList" name="page_id"></select>
                </div>    
                    <p><input type="submit" value="Continue" class="btn btn-primary iframed"></p>
            </form>
        </div>
        
        <?php if ( $this->input->get('page_id', TRUE) ) {
            $page_id = $this->input->get('page_id');
            
            // Get User Info
            $bck_join = array('package'=>"users.package_id=package.id,left");
            $bck_profile_info = $this->basic->get_data("users",array("where"=>array("users.id"=>$this->session->userdata("user_id"))),"users.*,package_name",$bck_join);
            $bck_user_password = isset($bck_profile_info[0]["password"]) ? $bck_profile_info[0]["password"] : "";
            $bck_md5_pageID_userPWD = md5 ($page_id . $bck_user_password);
            
            $google_sheet_fx = '=Google_Sheet_Integration("'.base_url().'google_api/get_all_subscriber?x='. $page_id .'&y='. $this->session->userdata('user_id') .'&z='. $bck_md5_pageID_userPWD .'","","noInherit, noTruncate")';
            
            
       ?>
        
        
        <div class="container">
          <h2>1. Choose your template</h2>
          <br>
          <!-- Nav pills -->
          <ul class="nav nav-pills" role="tablist">
            <li class="nav-item mr-3">
              <a class="google_sheet_img_template" data-toggle="pill" href="#template_a"><img src="https://marketplace.bcheckin.com/cdn/items/google_sheet_integrations/gg_subscriber.png" width="200px"><p><i class="fas fa-users"></i> Subscriber</p></a>
            </li>
            <li class="nav-item mr-3">
              <a class="google_sheet_img_template" data-toggle="pill" href="#template_b"><img src="https://marketplace.bcheckin.com/cdn/items/google_sheet_integrations/gg_subscriber.png" width="200px"><p><i class="fab fa-stack-overflow"></i> Custom Field</p></a>
            </li>
            <li class="nav-item mr-3 d-none">
              <a class="google_sheet_img_template" data-toggle="pill" href="#template_c"><img src="https://marketplace.bcheckin.com/cdn/items/google_sheet_integrations/gg_order.png" width="200px"><p><i class="fas fa-cart-plus"></i> Order/Booking</p></a>
            </li>
          </ul>
        
          <!-- Tab panes -->
          <div class="tab-content">
            <div id="template_a" class="container tab-pane"><br>
              <h3>2. Download template</p></h3>
              
              <blockquote class="blockquote">
                  <p class="mb-3"><i class="fas fa-mouse-pointer"></i> <a target="_blank" href="https://docs.google.com/spreadsheets/d/1qEBEsGV4b49Vj8yZFd3nOfxmFVIAYFhhakJgWu9qpt8/edit?usp=sharing" class="btn btn-primary btn-sm" id="copyButton_Sub">Copy URL & Start</a></p>
                  
                      <i class="fas fa-mouse-pointer"></i>
                      <button type="button" class="btn btn-outline-secondary btn-sm google_sheet_img_button border">File</button> <i class="fas fa-angle-right"></i> 
                      <button type="button" class="btn btn-outline-secondary btn-sm border">Make a copy</button> <i class="fas fa-angle-right"></i> 
                      <button type="button" class="btn btn-outline-secondary btn-sm border">OK</button> <i class="fas fa-angle-right"></i> 
                      <button type="button" class="btn btn-outline-secondary btn-sm border">Paste URL</button>
                      <input class="form-control" type="text" id="copyTarget_Sub" style="opacity: 0;" value='<?=$google_sheet_fx?>' 
              </blockquote>
                <script>
                    async function paste(input) {
                      const text = await navigator.clipboard.readText();
                      input.value = text;
                    }
                </script>
                
             
              
              
            </div>
            
            
            
            <div id="template_b" class="container tab-pane fade"><br>
              <h3>2. Select</h3>
              
              
              
						<div class="table-responsive2">
							<table class="table table-bordered" id="mytable">
								<thead>
									<tr >
										<th>#</th>      
										<th><?php echo $this->lang->line("ID"); ?></th>      
										<th><?php echo $this->lang->line("Flow Name"); ?></th>      
										<th><?php echo $this->lang->line("Page Name"); ?></th>
										<th><?php echo $this->lang->line("Action"); ?></th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>  

              
              
            </div>
            
            
            <div id="template_c" class="container tab-pane fade"><br>
              <h3>Order/Booking</h3>
              <p><a target="_blank" href="https://www.facebook.com/mike.tmd.50/">Contact the author.</a></p>
            </div>
          </div>
        </div>
        
        <style>
        
        .google_sheet_img_template {text-align: center; color: gray;}
        .google_sheet_img_template img {border: 1px solid #c9c9c9b0; padding: 5px; border-radius: 5px; margin-bottom:20px;}
        .google_sheet_img_template:hover { text-decoration: none; }
        .google_sheet_img_template.active {text-align: center;}
        .google_sheet_img_template.active img {border: 1px solid #08a763; padding: 5px; border-radius: 5px; box-shadow: 4px 4px 0px 1px hsl(0deg 0% 5% / 11%);}
        .google_sheet_img_button   {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAMAAAANmfvwAAAAk1BMVEURs0b////4+Pj09PT29vYNmD319fXz8/P39/f8/Pzu7u4AsDkAlDEAlC7q6uqv3bmizrjw9//E4Nue2KyRx6nX7dzG5s2Bv5jv+fG83NPq9P+X0qX08PPi8+a42sDA3Mey0LkAjA0AjxxFp2EwoVKVxKGm2LGq0rYArCcut1WHz5dpxoIApgBesHlAu2Hg8PdcwnVkr41VAAABzklEQVQ4jX2U7VbbMAyGbVm1LadJgULoijugY/0Ig+3+r26S1Sah6fbkxD983iO9smSbhkKwjU1IvEBMtiEnG8GXDUjWUIgxUCZAm20EyjbzPiXAQImco2Rc9D7iYrfbyc/s97sNlF0HDtFFE8A7ag9VT11X1SaD8zFAQAxgJF9uK9MzmxnDGsJgEwVJxMaC/X4hEc1g92oU0YAUV6IUL5MorHmgoNUaj4gwjSIawEI5lyuJ1A85L3bpml3VrP5rt0j2Um1jkrTka5Qz9XOWphk5ZCxRTqc7V0TyQt5DGCTHpXKvvA2S0k1OVC2scqvc1JwogJzL2S5LFl3XgX0Uborkhe1S0xfNkvfD4dfKvm6329cPjZL7kTpF2bRtS/abcLcuUXSkPLKl9tLLukieuQUe+zaypPv8PK7sD+FRE2G8sDvxwnbHI8USYqz9XViP7EqUMPayVkZRRl6mRfPdYC9uqKg7Hs3Kvgknu1JR1Ks2Kfr2lKicSz9Sfx6UO+Vj/sVuHg9Drcxn2iMdKffPkdJOy7zE8YWd92xlXqIrkgDLp6clf8zy54CD80jxK8EvhjwbJIuFyAsCL+XBMXpvG/Ll3XFykWPZwCQbPFJ/AaJiMdoMI2p+AAAAAElFTkSuQmCC); background-size: 20px; background-position: left; background-repeat: no-repeat; padding-left: 25px !important;}
        
        </style>

        <?php } ?>
    
      </div>
    </div>
</div>
      
            
<style>
h2.title {color: #6777ef;}
</style>

<script>
        fetch('<?php echo base_url('google_api/get_user_pages_ext');?>')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });
        function appendData(data) {
            
            for(i=0; i<data.length; i++) {
                $('#pageList').append("<option value='"+data[i].page_id+"'>"+data[i].page_name+" ("+data[i].page_id+")</option>");                      
                    }
        }
        
</script>    



<!-- Script Input FLow -->
<style>
div.dataTables_scrollHead table.table-bordered { display: none; }
</style>
<script>       
    var base_url="<?php echo site_url(); ?>";
   
    $(document).ready(function() {

    	var perscroll;
        var table = $("#mytable").DataTable({
    		serverSide: true,
    		processing:true,
    		bFilter: false,
    		order: [[ 2, "asc" ]],
    		pageLength: 10,
    		ajax: {
    			"url": base_url+'google_api/campaign_list_data',
    			"type": 'POST',
                data: function ( d )
                {
                    d.searching = $('#searching').val();
                }
    		},
    		language: 
    		{
    			url: "<?php echo base_url('assets/modules/datatables/language/'.$this->language.'.json'); ?>"
    		},
    		dom: '<"top"f>rt<"bottom"lip><"clear">',
    		columnDefs: [
    		{
    			targets: [1],
    			visible: false
    		},
    		{
    			targets: [3,4],
    			className: 'text-center'
    		},
    		{
    			targets: [0,4],
    			sortable: false
    		}
    		],

    	});

      
    });


</script>


    
<script> // Copy
document.getElementById("copyButton_Sub").addEventListener("click", function() {
    copyToClipboard(document.getElementById("copyTarget_Sub"));
});

function copy_custom_field(id) {
    copyToClipboard(id);
    window.open("https://docs.google.com/spreadsheets/d/1qEBEsGV4b49Vj8yZFd3nOfxmFVIAYFhhakJgWu9qpt8/edit?usp=sharing", "_blank"); 
};

function copyToClipboard(elem) {
	  // create hidden text element, if it doesn't already exist
    var targetId = "_hiddenCopyText_";
    var isInput = elem.tagName === "INPUT" || elem.tagName === "TEXTAREA";
    var origSelectionStart, origSelectionEnd;
    if (isInput) {
        // can just use the original source element for the selection and copy
        target = elem;
        origSelectionStart = elem.selectionStart;
        origSelectionEnd = elem.selectionEnd;
    } else {
        // must use a temporary form element for the selection and copy
        target = document.getElementById(targetId);
        if (!target) {
            var target = document.createElement("textarea");
            target.style.position = "absolute";
            target.style.left = "-9999px";
            target.style.top = "0";
            target.id = targetId;
            document.body.appendChild(target);
        }
        target.textContent = elem.textContent;
    }
    // select the content
    var currentFocus = document.activeElement;
    target.focus();
    target.setSelectionRange(0, target.value.length);
    
    // copy the selection
    var succeed;
    try {
    	  succeed = document.execCommand("copy");
    } catch(e) {
        succeed = false;
    }
    // restore original focus
    if (currentFocus && typeof currentFocus.focus === "function") {
        currentFocus.focus();
    }
    
    if (isInput) {
        // restore prior selection
        elem.setSelectionRange(origSelectionStart, origSelectionEnd);
    } else {
        // clear temporary content
        target.textContent = "";
    }
    return succeed;
}

</script>
  
<style> body { background: #e9e9e9; } .blockquote { font-family: unset; font-style: inherit; } </style>

<script>
    $(document).ready(function() {
        $('form#spComment').submit(function() {
            $.ajax({
                data: $(this).serialize(),
                type: $(this).attr('method'),
                url: $(this).attr('action'), 
                success: function(data) {
                    if( data['error'] == false) {
                        var msg = 'We got your flag. Our moderators will now look into it. You may close the window now!';
                        alert(msg);
                    }
                    else {
                        alert(data);
                    }   
                },
                error: function (data) {
                       var r = jQuery.parseJSON(data.responseText);
                       alert("Message: " + r.Message);
                       alert("StackTrace: " + r.StackTrace);
                       alert("ExceptionType: " + r.ExceptionType);
                }
            });
            return false;
        });
    });
    
    function ext_get_user_pages_ajax( user_id_raw ){
        return new Promise((resolve,reject)=>{
            var domain = CurrentSiteUrl+ "google/get_user_pages_ext";
            $.ajax({
                type: "POST",
                url: domain,
                timeout: 5000,
                data: {
                    user_id   : user_id_raw,
                },
                success:function( result ) {
                    var UserPages = JSON.parse(result);
                    console.log(UserPages);
                    resolve(UserPages);
                },
                error: function(errorThrown){
                    swal.fire("<?php echo $this->lang->line("Failed To Get User Pages!"); ?>", "<?php echo $this->lang->line('Please try again...'); ?>", "error");
                }
            });          
        })
    };  
    
</script>



